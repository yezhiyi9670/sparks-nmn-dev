`Spark Numbered Music Notation / docs :`

# Examples

注意：调号不一定对（~~是乱打的，但也不一定不对~~），仅供参考（~~不要参考~~）。

## Basics

### 1 基础格式 / 小星星

```plain
Props: 2/4 1=C
Notes: 1 1 | 5 5 | 6 6 | 5 - | 4 4 | 3 3 | 2 2 | 1- ||
```

附注：`1=C` 指定的是基准音高，默认表示 `1=C4`。如果你想，也可以 `1=C5`。解析器会验证小节的时值与拍号是否匹配。

拍号不可以缺失。分子为 `0` 的情况表示散板，解析器仅验证小节的拍数是否为整数。散板的情况下拍号不能使用解析式（见下文）。

### 2 简单歌词 / Music's Always There

```plain
P: 4/4 qpm=120 1=C
N: (12) | 3 3 - 3 | 4 3 2 1 | 2 (32~) 2 - ~| 2 -
Lw: Ev'-ry mor-ning will soon turn in-to e-ve-ning
```

附注：`qpm` (quarter per minute) 是每分钟的四分音符数量。

### 3 附点音符

```plain
P: 2/4 1=C
N: 1. (2) | 3. (4) | 5. (4) | 3. (2) | 1 - ||
```

### 4 高八度 / 考 试 序 曲

```plain
P: 4/4 1=C
N: 1e - 1 - | 1e - 1 - | 1e - 1 - | 1e - 1 - | 1e - 1e - | 2e - 1e - ||
```

附注：升两个八度可以用 `ee` 表示。

### 5 连音线 / Trouble is a Friend

```plain
P: 4/4 1=E
N: (05d) | 5d (5d5d) 7d (7d7d) | 2 2 4 4 | 3*.(2) 3. (2) | (34)(32)3*
Lw: You're fine for a while but you'll start to lose con-trol
```

### 6 多声部 / 芝士配曲奇

```plain
P: 4/4 1=bB
N[S]:      (05d)(12) | 3 (31) (25) (51) | (17d) (15) 3 (05) | (56) (03) (53) (15d) | (6d1) (51) 2
LyricChar: 这感觉像(第一)次遇见你, 用芝士配曲奇. 没道理, 不想逃离, 奶油加进甜心
N[S*]:     (05d)(12) | 5 (53) (52) (22) | (32)  (37) 5 0    | 0    (56) (03) (51)  | (23)  (21) 2
Lc:        _{15} 道理 不逃离 油加进甜心
```
附注：`d` 表示降八度音，`dd` 也可以用，不过不允许 `ed`。`_{15}` 是 15 个占位符的缩写。

声部可以没有名称。若分片前后的声部组成（及其名称）有纯增加或减少，则会试图自适应处理；若既有增加又有减少，则这里会被强制换行。

### 7 自定义下划线分组 / 我也不知道这旋律叫什么

```plain
P: 3/4 1=G
N: 5 (1234) | 5 1 1 | 6 (4567) | 1e 1 1 | 4 (5432) | 3 (4321) | 7d (1231) | 2 - -
```

### 8 三连音 / DL-水晶

```plain
P: 4/4 1=G
N: 1e T(1e1e1e) 7 T(777) | 6 T(671e) 7 5 | 1e T(1e1e1e) 7 T(777) | 6 T(671e) 7 5 |
```

附注：`T` 不可以小写。

### 9 默认三连音 / 爱的华尔兹(已黑化)

```plain
P: 6/4T 1=D
N: (3~32) (3~32) (3~31) 2 5 - | (5~54) (5~54) (5~54) 3 - D(6d1) | 4 - D(43) 2 1 7d
```

## Structure and Lyrics

### 10 反复记号

```plain
P: 2/4 1=C
N: (12) (34) | (54) (32) ||: (12) (34) | (54) (32) :|| 1 -
```

附注：双侧反复记号应该写成 `:||:`，不是 `:|||:`，尽管看起来更像后者。这是为源代码可读性考虑的。

### 11 曲式结构反复标记

```plain
P: 4/4 1=C
N: (05d) (6d7d) |{$} 1 (12) 3 (34) | (54) (34) 5 - |
---
N: (43) (23) (42) (7d2) | 5d 5d 1 - |{Fine}
---
N: 6 (65) 4 6 | 5 4 3 - | (43) (23) 4 (32) | 1 (12) 1 - |{D.S.}
```

附注：`D.S.` 查找的是同一个片段中最近的 `$`。`D.S.` 和 `D.C.` 仅在反复迭代数为 `1` 时生效。如果反复迭代数大于 `1`，那么到达 `Fine` 时片段将结束。

传送门记号写作 `@`，有点多余，这里不放例子了。只会在反复迭代数大于 `1` 时触发。

Fragment 分隔线可以是任意数量的连字符 `-`，理论上应该是三个。

### 12 多片段 / 森林狂想曲

```plain
P: 4/4 1=B
Text: Order: A-B-A-B-C-A
====
Section: A
// SectionProps: 4/4 1=B
N: ((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 3d - | omit(2)
====
S: B
N: (0(6d7d)) | ((1234)) (5(43)) (2(23)) 2 | ((6d7d12)) (3(7d6d)) 7d (0(6d7d)) | omit
====
S: C
N: (03) | 6 (5(35)) 6 (5(32)) | ((16d12)) (3(32)) 3 (03) | omit
```

附注：`omit(2)` 相当于多个小节的省略缩写。一个小节如果为 omit 则不能有其他内容。`omit` 不含数量，则相当于“(后略)”。

Section 分隔线可以是任意数量的等号 `=`，理论上应该是四个。

### 13 反常拍号 / DL-大教堂

```plain
P: 5/4=3/4+2/4 1=F
N: 1 7d | (11) (01) 1 7d 6d | (7d7d) (07d) 7d 1 7d | (11) (01) 1 2 1 | (22) (02) 2 3 2
```

附注：解析器会验证拍号解析式左右是否相等（右边各项分母不必一致，这样可以表示拍速发生变化的特殊拍型）。解析式中不能有空格。

解析式是可选的，若非常见拍号没有解析式，则奇数解析作 `{2N+1}/{F}={2N+1}/{F}`，偶数解析作 `{2N}/{F}={N}/{F}+{N}/{F}`。

### 14 复杂反复记号 / Kruhay

```plain
P: 4/4 1=C
N: ||: (11) (11) (11) (11) | (11) (11) (11) (11) | X 1 - (01)
---
N: ||:{3., 4., 5., "with p,mp,pp"} (6d1) (1(6d6d)) (6d1) (11) | 1 - - - :||{x4}
```

附注：`x4` 表示后反复记号的“耐久度”，与迭代数无关。`3.` `4.` `5.` 是整体，表示迭代数（多个迭代数连续，渲染中自动缩写成 `3,4,5.`），`"with p,mp,pp"` 是没有活性的文本注记。

### 15 重置迭代数

```plain
P: 4/4 1=C
N: (12)(34)(54)(32) :||{x2}{reset} 1 - - - ||: (56) (71e) (2e1e) (76) :||{x2} 5 - - - ||
```

附注：重置迭代数不能与反复记号重合。使用 `:||{}{reset}` 或 `{reset}:||{}` 将其标记在小节线之后或之前。

### 16 跳房子与多段歌词 / 秘境茶会

```plain
P: 6/8 1=E
N: 3. 3 (1) | #2. 7d. | 2. (217d) | 7d. (7d12) | 3. 3(1) | #2. #4(7) | 6. (6#56) |
Lc[1.]: 翻开下一页, 请稍候床边, 打碎了橘子酱发现橱窗里的世
Lc[2.]: 沉默的茶点, 乖巧地镶嵌, 剥落了烫金字露出褪色的星期
NotesSubstitute: 7: 6. (6#57)
Lc[3.]: 纸牌的背面, 猫露出笑脸, 推倒了多米诺尽头是午夜的终
---
Jumper: 1., 2., * // 跳房子区间段落 1, 2
N: 7. (3#57) | 6(6) (6#56) | 7(7) (71e2) | (3e2e1e) (2e1e7) | 7(0) (71e2e) | 1e(1e) (1e2e3e) | 2e(2e) (2e3e4e) | 3e.~3e. |
Lc[1.]: 界. 跟随着萤火虫的曲线, 那兔子的礼服里掉落请柬, 鸢尾装点, 灌木林背面, 排列了盛宴.
Ns: 1: 7. 0(0)
Lc[2.]: 天.      端坐在圆桌中间, 被嚣张的荆棘勾住裙边, 灯火彻夜, 女王的杖尖, 点燃了盛典.
---
J: 3.
N: 3e.~3e. |
Lc[3.]: 点.
```

附注：附带下标的 `Ns[x.]` 会使得替代旋律开头加上标号。`7:` 表示替代旋律的开始位置（当前 Fragment 内的小节序号），若有多处需要替代，应当添加多个 `Ns` 行。对于每个小节，替代旋律要么不替代，要么替代整个小节。

星号 `*` 在 Jumper 属性中，表示跳房子记号只标记第一、第二和最后一个小节，中间开放。这适用于较长的区间，可以避免绘制过长的横线。

因为是简谱，这段旋律也可以用 `6/12T` 拍号。

### 17 小节线上段号

```plain
P: 4/4 1=C
N: (51e) (53) (25) (42) | (13) (53) 1 - ||{[B]} (23) (23) (42) (54) | (31e) (76) (54) (31)
```

### 18 歌词角色标记 / 小酒窝

```plain
P: 4/4 1=C
N: 6d (7d1) 2 (34) | (34) (32) (2*) 1* (5d) | (5d4d) (4d1) (13) (31) | 2 -
Lc: [[合]]你不知道 [[女]]你对我 [[合]]多么重要, 有了你生命完整的刚好.
```

### 19 反常歌词 / 麦浪

```plain
P: 4/4 1=C
N: (23) | (47d) (7d) 1 (0) (23) | 4 (7d7d~) (7d) 2 ((2*1~)) | 1* - - - |
Lc: 期待在不久后, 爱绽放映入眼眸. _{2}
---
N: (05) (53) (21) (23) | (1*5) 3 (53*) (02~) | (25) (32) (5) 3 (0) | (3*5) 3 (53*) (06~) | (65) (35) (2*1*) 1
Lc: 风往麦田吹来, 在'[i-ai i-ai] 轻晃着我裙摆, 待'[i-ai i-ai] 你慢步走过_来,
```

附注：`'` 在中文歌词中可作为轻音记号（非标准）。中括号内视为音标片段区，其中歌词切分按照英文歌词处理

### 19 夹杂英文歌词 / 爱很美

```plain
P: 4/4 1=#E
N: (05d) (12) | 3 3 (32) (21) | (22) (6(65~)) 5 - |
Lc: "Oh" "Ba"-"by" 愿 愿 愿意我什么都愿意
```

歌词里面需要写引号？那...用全角的罢。 

### 20 手动歌词切分

```plain
P: 4/4 qpm=120 1=C
N: (12) | 3 3 - 3 | 4 3 2 1 | 2 (32~) 2 - ~| 2 -
L: Ev'#-#ry / mor#-#ning / will / soon / turn / in#-#to / e#-#ve#-#ning
```

### 21 小括号

```plain
P: 4/4 1=C
N: &lpr; (05d) (6d7d) &rpr; | 1 (12) 3 (34)
```

至于那个换气和层叠记号，不妨用 `&br;` 和 `&cas;`。

## Decoration

### 22 装饰音符

```plain
M: 2/4 1=C
N: 3 5[((6))] | 3 5[((6))] | 2 3[p((2))] | 1 -
```

### 23 音符修饰符

```plain
M: 4/4 1=C
N: 3 2 4 3~ | 3[tr] - - -
```

附注：其他修饰符 `ela` (elapse) `uw` (upper-wave) `lw` (lower-wave) `disc` (discrete) `cont` (continuous) `str` (strike).

### 24 上下滑音

```plain
M: 2/2 1=C
N: 6 - 6 6 | 7 - 7 7 | 1e - 1e - | 7 - 7d 6d | 7d - - 1 | 4 - 4 - | 4 - 4 - | 4[ds] 0 0 0 |
```

附注：上滑可以使用 `us`

### 25 滑到下一个音

undefined

### 26 定音高念白

定音高念白显示为 'X' 的左上角附带音高符号。不能同时使用装饰音。

```plain
M: 4/4 1=C
N: (06) (65) | 1 X[f1] (12) (21) | 5 5
Lc: 梨涡浅笑呀, 转身翩若惊鸿,
```

附注：f 后面的符号只能定义音高，不能含下划线。

## Annotation

### 27 基本力度记号

```plain
M: 4/4 1=C
N: 0 0 0 0 | 0 0 0 (0(1e7)) | 1e - - (1e7) | 7 - - - |
L: Kru_-hay Kru-hay
F: 0 | 0 | fp < - - | fp < - - |
```

注：F 行中的小节可以不填满。

充当音符的记号：`ppp` `pp` `p` `mp` `mf` `f` `ff` `fff` `sfz` `fp` `ffp` `<` `>` 以及其他单词。单词之间需要空格。`cresc` 等记号按自定义标记处理。

### 28 自定义标记

```plain
M: 2/2 1=G
N: 3~ - - - | 3 - - - | 0 0 0 0 | 3 - 3 3 | 3 4 3 3 |
L: AH HU AL-LAAH HU HU AL-LAAH
A: 0 | "Twice as fast" | 0 | 0 | 0 |
```

注：A 行中的小节可不填满

若小节内不存在力度记号，则写在第一上标行上，否则在第二上标行。

## Chord

### 29 和弦进行标记

```plain
P: 4/4 1=D +2
N: 5 (34) 5 (34) | (55d) (6d7d) (12) (34) | 3 (12) 3 (3d4d) | (5d6d) (5d4d) (5d1) (7d1) |
C: C | G/B | Am | Em/G |
-
N: (6d) (17d) 6d (5d4d) | (5d4d) (3d4d) (5d6d) (7d1) | 6d (17d) 1 (7d6d) | (7d6d) (7d1) (23) (45) |
C: F | C/E | Dm | G |
```

写在旋律行和第一上标行中间。

## Variation

### 30 临时拍号

```plain
M: 6/8 1=E
N: (6(3e#2e3e)) 4e(3e) | #2e(4e) 3e(3e) | (671e) (71e2e) | 3e.~3e. |
\\
N: |{}{b3/4} 1e - 1e | 7 - 7 | 6 - 6 | #5 - 5 | 6 - 6 | #5 - 5 | 6 - 1e | 7 - - | 0 0 0 |
\\
N: |{}{b6/8} 3. 3(1) | #2. 7d. | omit
```

注：临时拍号是命令式记号。有的时候（比如反复记号处）可能需要将其写在小节线的前面。

### 31 已知调性的转调

```plain
M: 6/4 1=C
N: 2 2 1 (21) 6d 5d | 1 (21) 5d 6d 3d 6d |{t1=D}{"(6=原7)"} 6d - (12) 3 - (35) | 6 5 3 2 6d | omit
```

### 32 已知差值的转调

```plain
M: 6/4 1=?
N: 2 2 1 (21) 6d 5d | 1 (21) 5d 6d 3d 6d |{dt=2}{"(6=原7)"} 6d - (12) 3 - (35) | 6 5 3 2 6d | omit
```

注：`dt=2` `dt=3thd` `dt=3thm` `dt=3th` `dt=-3tha` 分别表示升高 2Key，升高减三度，升高小三度，升高大三度和降低增三度。

### 33 改变拍速

```plain
M: 4/4 qpm=60 1=C
N: 1e - 1 - | 1e - 1 - | 1e - 1 - | 1e - 1 - | 1e - 1e - | 2e - 1e - ||
\\
N: |{}{qpm=120} X X X X | omit
```
